# Nixpacks configuration for Railway
# Alternative to Docker - often more reliable

[phases.setup]
nixPkgs = ["python311", "ffmpeg", "curl"]

[phases.install]
cmds = [
    "pip install --upgrade pip",
    "pip install python-dotenv pyyaml pydantic",
    "pip install fastapi uvicorn jinja2 httpx",
    "pip install aiosqlite tenacity structlog",
    "pip install numpy soundfile",
    "pip install faster-whisper",
    "pip install google-generativeai",
    "pip install reportlab",
    "pip install playwright",
    "playwright install chromium"
]

[start]
cmd = "uvicorn web.app:app --host 0.0.0.0 --port $PORT"
